# Live2D 看板娘扩展 - 完整安装运行指南

## 📦 第一步：安装扩展到 Chrome

### 1. 打开 Chrome 扩展管理页面

在 Chrome 浏览器地址栏输入：
```
chrome://extensions/
```
然后按回车键

### 2. 启用开发者模式

在页面右上角，找到 **"开发者模式"** 开关，点击打开（变成蓝色）

![开发者模式位置示意]
```
右上角：[ ] 开发者模式  →  [√] 开发者模式
```

### 3. 加载扩展

点击左上角的 **"加载已解压的扩展程序"** 按钮

在弹出的文件选择窗口中：
- 找到 `live2d-extension` 文件夹
- 选择这个文件夹
- 点击 **"选择"** 或 **"打开"**

### 4. 确认安装成功

你应该看到：
- 扩展列表中出现 "Live2D Waifu"
- 开关是蓝色的（已启用）
- 没有红色错误提示

如果有红色错误：
- 点击 "详细信息" 查看错误
- 把错误信息发给我

## 🌐 第二步：测试扩展

### 1. 打开一个网页

推荐先在简单的网页测试，比如：
```
https://www.google.com
```

### 2. 打开开发者工具

按键盘上的 `F12` 键
或者：
- Windows/Linux: 按 `Ctrl + Shift + I`
- Mac: 按 `Cmd + Option + I`
- 或者右键点击页面 → 选择 "检查"

### 3. 切换到 Console 标签

在开发者工具顶部，点击 **Console**（控制台）标签

### 4. 查看日志

你应该能看到以 `[Live2D Extension]` 开头的消息，比如：
```
[Live2D Extension] Starting resource loading...
[Live2D Extension] Extension ID: xxxxx
[Live2D Extension] Resources loaded successfully
```

### 5. 查看页面

在网页的**右下角**，应该能看到看板娘元素

## 🔍 第三步：运行诊断（如果有问题）

### 如果右下角什么都没有，或者控制台有错误：

在 Console 标签页底部的输入框中，**复制粘贴**以下代码：

```javascript
fetch(chrome.runtime.getURL('error-report.js')).then(r => r.text()).then(eval);
```

然后按 `Enter` 键运行

### 等待 3-5 秒

脚本会自动检查所有问题，并显示：
- ✅ 哪些功能正常
- ❌ 哪些功能有问题
- 💡 修复建议

### 把诊断结果发给我

- 可以截图整个控制台
- 或者复制所有文字
- 特别注意红色的错误信息

## 📸 截图示例

### 正确的状态应该是：

**chrome://extensions/ 页面：**
```
✅ Live2D Waifu
   版本: 1.0
   ID: abcdefgh...
   [蓝色开关] 已启用
```

**网页控制台：**
```
[Live2D Extension] Starting resource loading...
[Live2D Extension] Extension ID: abcdefgh...
[Live2D Extension] Base URL: chrome-extension://abcdefgh...
[Live2D Extension] Resources loaded successfully
[Live2D Extension] Waiting for initWidget...
[Live2D Extension] initWidget found!
[Live2D Extension] Initializing with models: ...
```

**网页右下角：**
```
应该能看到看板娘的容器
（即使模型没有完全渲染，至少应该有一个空白区域）
```

## ❌ 常见问题

### 问题 1：找不到 chrome://extensions/

**解决**：
- 确保你使用的是 Chrome 浏览器（不是 Edge、Firefox 等）
- 直接在地址栏输入，不要在搜索引擎搜索

### 问题 2：找不到 "加载已解压的扩展程序" 按钮

**解决**：
- 确保已经打开"开发者模式"（右上角的开关）
- 刷新页面

### 问题 3：选择文件夹后提示错误

**可能的错误和解决方案**：

**错误 A：manifest.json 缺失**
```
找不到有效的 manifest.json
```
解决：确保选择的是 `live2d-extension` 文件夹，这个文件夹里应该直接包含 `manifest.json`

**错误 B：manifest.json 格式错误**
```
解析 manifest.json 失败
```
解决：manifest.json 文件可能损坏，需要检查文件内容

### 问题 4：扩展加载成功但网页什么都没有

运行诊断脚本（见第三步）

### 问题 5：控制台显示很多红色错误

把错误信息**完整复制**发给我，我才能帮你修复

## 🎯 快速检查清单

在询问帮助前，请确认：

- [ ] 使用的是 Chrome 浏览器
- [ ] 在 chrome://extensions/ 中看到扩展
- [ ] 开发者模式已打开（蓝色）
- [ ] 扩展开关是蓝色的（已启用）
- [ ] 没有红色错误提示
- [ ] 已经刷新了测试网页
- [ ] 已经打开了开发者工具（F12）
- [ ] 已经查看了 Console 标签页
- [ ] 已经运行了诊断脚本

## 💬 获取帮助

如果还是不工作，请提供：

1. **Chrome 版本**
   - 在地址栏输入 `chrome://version/`
   - 复制第一行的版本号

2. **操作系统**
   - Windows 10/11
   - macOS (版本号)
   - Linux (发行版)

3. **扩展状态截图**
   - chrome://extensions/ 页面的截图

4. **控制台截图**
   - F12 → Console 标签页的截图
   - 特别是红色错误信息

5. **诊断脚本输出**
   - 运行 error-report.js 后的所有输出

有了这些信息，我才能准确帮你解决问题！

